<div class="supplier-area">
    <div class="supplier-header">
        <h1>Añadir proveedor</h1>
        <mat-divider></mat-divider>
    </div>
    <div class="supplier-form">
        <form>
            <!-- Razon Social -->
            <mat-form-field style="margin: 20px; width: 30%;" class="razon-social-field">
                <mat-label>Razon Social</mat-label>
                <input matInput placeholder="Ex. RETAIL PERU S.A." [formControl]="razonSocialFormControl" [errorStateMatcher]="razonSocialMatcher">
                @if (razonSocialFormControl.hasError('required')){
                    <mat-error>La razón social es requerida.</mat-error>
                }
                @if (razonSocialFormControl.hasError('minlength')){
                    <mat-error>La razón social debe tener al menos 5 caracteres.</mat-error>
                }
                @if (razonSocialFormControl.hasError('maxlength')){
                    <mat-error>La razón social no debe tener más de 50 caracteres.</mat-error>
                }
            </mat-form-field>
            <!-- Nombre Comercial -->
            <mat-form-field style="margin: 20px; width: 30%;" class="nombre-comercial-field">
                <mat-label>Nombre Comercial</mat-label>
                <input matInput placeholder="Ex. Wong" [formControl]="nombreComercialFormControl" [errorStateMatcher]="nombreComercialMatcher">
                @if (nombreComercialFormControl.hasError('required')){
                    <mat-error>El nombre comercial es requerido.</mat-error>
                }
                @if (nombreComercialFormControl.hasError('minlength')){
                    <mat-error>El nombre comercial debe tener al menos 5 caracteres.</mat-error>
                }
                @if (nombreComercialFormControl.hasError('maxlength')){
                    <mat-error>El nombre comercial no debe tener más de 50 caracteres.</mat-error>
                }
            </mat-form-field>
            <!-- Identificación tributaria -->
            <mat-form-field style="margin: 20px; width: 30%;" class="identificacion-field">
                <mat-label>Identificación Tributaria</mat-label>
                <input matInput placeholder="Ex. 1234567890" [formControl]="identificacionTributariaFormControl" [errorStateMatcher]="identificacionTributariaMatcher">
                @if (identificacionTributariaFormControl.hasError('required')){
                    <mat-error>La identificación tributaria es requerida.</mat-error>
                }
                @if (identificacionTributariaFormControl.hasError('pattern')){
                    <mat-error>La identificación tributaria debe contener solo números.</mat-error>
                }
            </mat-form-field>
            <!-- Correo electronica -->
            <mat-form-field style="margin: 20px; width: 30%;" class="correo-field">
                <mat-label>Correo Electronico</mat-label>
                <input type="email" matInput placeholder="Ex. wong@retailperu.com" [formControl]="emailFormControl" [errorStateMatcher]="emailMatcher">
                @if (emailFormControl.hasError('required')){
                    <mat-error>El correo electrónico es requerido.</mat-error>
                }
                @if (emailFormControl.hasError('email')){
                    <mat-error>El correo electrónico no es válido.</mat-error>
                }
            </mat-form-field>
            <!-- Sitio Web -->
            <mat-form-field  style="margin: 20px; width: 30%;" class="sitio-web-field">
                <mat-label>Sitio Web</mat-label>
                <input matInput placeholder="Ex. www.retailperu.com" [formControl]="sitioWebFormControl" [errorStateMatcher]="sitioWebMatcher">
                @if (sitioWebFormControl.hasError('required')){
                    <mat-error>El sitio web es requerido.</mat-error>
                }
            </mat-form-field>
            <!-- Dirección fisica -->
            <mat-form-field style="margin: 20px; width: 30%;" class="direccion-field">
                <mat-label>Dirección Física</mat-label>
                <input matInput placeholder="Ex. Calle 123, Urb. San Francisco, Lima Perú" [formControl]="direccionFormControl" [errorStateMatcher]="direccionMatcher">
                @if (direccionFormControl.hasError('required')){
                    <mat-error>La dirección es requerida.</mat-error>
                }
                @if (direccionFormControl.hasError('minlength')){
                    <mat-error>La dirección debe tener al menos 5 caracteres.</mat-error>
                }
                @if (direccionFormControl.hasError('maxlength')){
                    <mat-error>La dirección no debe tener más de 50 caracteres.</mat-error>
                }
            </mat-form-field>
            <!-- País -->
            <!-- Facturación anual en dolares -->
            <mat-form-field style="margin: 20px; width: 30%;" class="facturacion-dolares-field">
                <mat-label>Facturación Anual en Dólares</mat-label>
                <input matInput placeholder="Ex. 1000" [formControl]="facturacionAnualFormControl" [errorStateMatcher]="facturacionAnualMatcher">
                @if (facturacionAnualFormControl.hasError('required')){
                    <mat-error>La facturación anual en dólares es requerida.</mat-error>
                }
                @if (facturacionAnualFormControl.hasError('pattern')){
                    <mat-error>La facturación anual en dólares debe contener solo números.</mat-error>
                }
            </mat-form-field>
        </form>

        <button mat-raised-button color="custom" (click)="postSupplier()">Agregar</button>
    </div>
    <div class="table-container">
    <mat-divider></mat-divider>
        <div class="supplier-table">
            <table mat-table [dataSource]="dataSource" matSort>          
              <!-- Razon Social Column -->
              <ng-container matColumnDef="razonSocial">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Razon Social </th>
                <td mat-cell *matCellDef="let element"> {{element.razonSocial}} </td>
              </ng-container>
          
                <!-- Nombre Comercial Column -->
                <ng-container matColumnDef="nombreComercial">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by Nombre Comercial"> Nombre Comercial </th>
                  <td mat-cell *matCellDef="let element"> {{element.nombreComercial}} </td>
                </ng-container>

                <!-- Identificación Tributaria Column -->
                <ng-container matColumnDef="identificacionTributaria">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by Identificación Tributaria"> Identificación Tributaria </th>
                  <td mat-cell *matCellDef="let element"> {{element.identificacionTributaria}} </td>
                </ng-container>

                <!-- Email Column -->
                <ng-container matColumnDef="email">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by Email"> Email </th>
                  <td mat-cell *matCellDef="let element"> {{element.email}} </td>
                </ng-container>

                <!-- Sitio Web Column -->
                <ng-container matColumnDef="sitioWeb">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by Sitio Web"> Sitio Web </th>
                  <td mat-cell *matCellDef="let element"> {{element.sitioWeb}} </td>
                </ng-container>

                <!-- Dirección Fisica Column -->
                <ng-container matColumnDef="direccionFisica">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by Dirección Fisica"> Direccción Fisica </th>
                  <td mat-cell *matCellDef="let element"> {{element.direccionFisica}} </td>
                </ng-container>

                <!-- Facturación Anual Column -->
                <ng-container matColumnDef="facturacionAnual">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Facturación Anual </th>
                  <td mat-cell *matCellDef="let element"> {{element.facturacionAnual}} </td>
                </ng-container>

                <!-- Ultima Modificación Column -->
                <ng-container matColumnDef="ultimaModificacion">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Ultima Modicicación </th>
                  <td mat-cell *matCellDef="let element"> {{element.ultimaModificacion}} </td>
                </ng-container>

                <!-- Acciones Column -->
                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef> Acciones </th>
                  <td mat-cell *matCellDef="let element"> 
                    <button mat-icon-button color="primary" (click)="openDialog(element)">
                        <mat-icon aria-hidden="false" fontIcon="find_in_page"></mat-icon>
                    </button>
                    <button mat-icon-button color="primary" aria-label="Editar">
                        <mat-icon aria-hidden="false" fontIcon="edit"></mat-icon>
                    </button>
                    <button mat-icon-button color="warn" aria-label="Eliminar" (click)="deleteSupplier(element.id)">
                        <mat-icon aria-hidden="false" fontIcon="delete"></mat-icon>

                    </button>
                  </td>
                </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
          
            <mat-paginator [pageSizeOptions]="[5, 10, 20]"
                           showFirstLastButtons
                           aria-label="Select page of periodic elements">
            </mat-paginator>
          </div>
    </div>
</div>    
